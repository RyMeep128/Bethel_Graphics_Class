<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Render to Texture</title>

    <script id="vertex-shader-cube" type="x-shader/x-vertex">#version 300 es
    //TODO This is our first pass that will render a 3D scene to a 2D texture output
    in vec4 vPosition;
    in vec4 vColor;
    uniform mat4 model_view;
    uniform mat4 projection;
    out vec4 color;

    void main()
    {
        gl_Position = projection*model_view*vPosition/vPosition.w;
        color = vColor;
    }

    </script>

    <script id="fragment-shader-cube" type="x-shader/x-fragment">#version 300 es

    precision mediump float;
    in vec4 color;
    out vec4  fColor;

    void main()
    {
        fColor = color;
    }

    </script>

    <script id="vertex-shader-square" type="x-shader/x-vertex">#version 300 es

    //TODO And here is our second pass that will be mapping the texture
    //generated by pass 1 onto a flat square
    in vec4 vPosition;
    in vec2 texCoord;

    uniform mat4 model_view;
    uniform mat4 projection;

    out vec2 ftexCoord;


    void main()
    {
        ftexCoord = texCoord;
        gl_Position = projection * model_view * vPosition;
    }

    </script>

    <script id="fragment-shader-square" type="x-shader/x-fragment">#version 300 es

    precision mediump float;

    in vec2 ftexCoord;
    uniform sampler2D textureSampler;

    out vec4  fColor;

    void main()
    {
        fColor =texture(textureSampler, ftexCoord);
    }

    </script>


    <script type="module" src="renderToTextureFunctions.js"></script>
</head>
<body>
<div>Demonstrating rendering to a texture instead of straight to the frame buffer</div>
<canvas id="gl-canvas" width="512" height="512">
    Sorry; your web browser doesn't support HTML5's canvas element.
</canvas>
</body>
</html>